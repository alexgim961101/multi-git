# Multi-Git 관리 도구 PRD (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 목적
DevOps 직군의 개발자들이 여러 Git 저장소를 효율적으로 관리할 수 있는 CLI 도구를 제공합니다.

### 1.2 문제 정의
- 여러 Git 저장소를 일괄적으로 클론하는 작업이 번거로움
- 관리되는 저장소들의 동일한 브랜치 이름을 한 번에 변경하는 작업이 반복적임
- 여러 저장소의 특정 브랜치에 태그를 동시에 생성/관리하는 작업이 시간 소모적임
- 릴리스 후 배포 시 브랜치에서 충돌이 발생하지만 의미 없는 충돌이라 강제 push가 필요한 경우가 많음

## 2. 핵심 기능 요구사항 (필수 기능)

### 2.1 저장소 클론 기능
- 여러 Git 저장소를 한 번에 클론
- 저장소 URL 목록을 설정 파일로 관리
- 클론 결과 요약 및 실패한 저장소 리포트
- 이미 클론된 저장소는 스킵 옵션

### 2.2 브랜치 일괄 변경 기능
- 관리되는 모든 저장소의 동일한 브랜치 이름으로 한 번에 체크아웃
- 예: 모든 저장소를 `release/v1.0.0` 브랜치로 변경
- 브랜치가 존재하지 않는 경우 에러 리포트
- 변경 전 현재 브랜치 상태 확인

### 2.4 강제 Push 기능
- 여러 저장소의 특정 브랜치에 대해 강제 push 수행
- 릴리스 후 배포 시 브랜치 충돌이 발생하지만 의미 없는 충돌인 경우 강제 push로 해결
- 로컬 브랜치를 원격의 다른 이름으로 푸시 지원 (`local:remote` 형식)
- 안전을 위한 확인 프롬프트 제공 (--force 옵션)
- 강제 push 결과 요약 및 실패한 저장소 리포트

### 2.3 태그 동시 관리 기능
- 특정 브랜치에 태그를 여러 저장소에 동시에 생성
- 태그 생성 및 푸시 기능
- 기존 태그 조회 및 삭제 기능
- 태그 작업 결과 요약

### 2.5 명령어 일괄 실행 기능
- 관리되는 모든 저장소에서 동일한 셸 명령어/스크립트 실행
- 예: 모든 저장소에서 `npm install`, `make build` 등 실행
- 명령어 실행 결과 요약 및 실패한 저장소 리포트
- 병렬/순차 실행 옵션
- dry-run 모드로 사전 확인 가능

## 3. 사용자 시나리오

### 시나리오 1: 여러 저장소 클론
```
사용자가 여러 저장소를 한 번에 클론하고 싶을 때
→ multi-git clone
→ 설정 파일에 정의된 모든 저장소를 현재 디렉토리에 클론
```

### 시나리오 2: 브랜치 일괄 변경
```
사용자가 모든 저장소를 동일한 브랜치로 변경하고 싶을 때
→ multi-git checkout release/v1.0.0
→ 관리되는 모든 저장소가 release/v1.0.0 브랜치로 체크아웃됨
```

### 시나리오 3: 특정 브랜치에 태그 동시 생성
```
사용자가 여러 저장소의 release 브랜치에 v1.0.0 태그를 붙이고 싶을 때
→ multi-git tag --branch release/v1.0.0 --name v1.0.0 --push
→ 모든 저장소의 release/v1.0.0 브랜치에 태그 생성 및 푸시
```

### 시나리오 4: 브랜치 강제 Push
```
사용자가 릴리스 후 배포 시 브랜치 충돌이 발생했지만 의미 없는 충돌이라 강제 push하고 싶을 때
→ multi-git push --branch release/v1.0.0 --force
→ 모든 저장소의 release/v1.0.0 브랜치에 강제 push 수행

사용자가 로컬 브랜치를 원격의 다른 이름으로 푸시하고 싶을 때
→ multi-git push --branch master:aging --force
→ 로컬 master 브랜치를 원격 aging 브랜치로 푸시
```

### 시나리오 5: 모든 저장소에서 명령어 실행
```
사용자가 모든 저장소에서 동일한 명령어를 실행하고 싶을 때
→ multi-git exec "npm install"
→ 모든 저장소에서 npm install 명령어가 실행됨

사용자가 모든 저장소에 동일한 파일을 생성하고 싶을 때
→ multi-git exec "touch .env.example"
→ 모든 저장소에 .env.example 파일이 생성됨
```

## 4. 기술 요구사항

### 4.1 개발 환경
- 언어: Python 또는 Go (CLI 도구에 적합)
- Git 라이브러리: GitPython (Python) 또는 go-git (Go)

### 4.2 설정 파일 형식
- YAML 또는 JSON 형식의 설정 파일
- 저장소 경로, 브랜치 정보 등 저장

### 4.3 출력 형식
- CLI 기반 인터페이스
- 이모지(✓, ✗, ⚠️)를 통한 성공/실패 표시
- 상세 모드 옵션 제공

## 5. 우선순위

### Phase 1 (MVP - 필수 기능)
1. **저장소 클론 기능**: 여러 저장소를 한 번에 클론
2. **브랜치 일괄 변경 기능**: 동일한 브랜치 이름으로 모든 저장소 체크아웃
3. **태그 동시 관리 기능**: 특정 브랜치에 태그를 여러 저장소에 동시 생성/푸시
4. **강제 Push 기능**: 여러 저장소의 특정 브랜치에 강제 push 수행 (릴리스 배포 시 충돌 해결용)

### Phase 2
1. 저장소 목록 관리 (추가/제거/조회)
2. 저장소 상태 확인 (현재 브랜치, 커밋 상태 등)
3. 에러 핸들링 및 상세 리포트

### Phase 3
1. 병렬 처리로 성능 최적화
2. Pull/Fetch 기능 추가
3. 웹 대시보드 (선택사항)

## 6. 성공 지표
- 여러 저장소 관리 시간 80% 단축
- 태그 생성 작업 자동화로 실수 감소
- 사용자 만족도 향상

